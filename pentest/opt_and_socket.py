# this is a sample python script which shows the second part of the tcp connection making module with both optparse and socket library used .
# the optparse library or called as option parser library which is used for parsing command line options.
# the socket library is used to create a successfull connection with a target host and port


import optparse
from socket import *


def connScan(tgtHost,tgtPort):
	try:
		connSkt=socket(AF_INET,SOCK_STREAM)
		connSkt.connect((tgtHost,tgtPort))
		print'[+]%d/tcp open'% tgtPort
		connSkt.close()
	except:
		print'[-]%d/tcp closed'%tgtPort


def portScan(tgtHost,tgtPorts):
	try:
		tgtIP=gethostbyname=(tgtHost)
	except:
		print"[-] cannot resolve '%s': Unknown host"%tgtHost
		return
	try:
		tgtName=gethostbyaddr(tgtIP)
		print'\n[+] Scan Results for:'+tgtName[0]
	except:
		print'\n[+] Scan Results for:'+tgtIP
	setdefaulttimeout(1)
	for tgtPort in tgtPorts:
		print'Scanning port'+tgtPort
		connScan(tgtHost,int(tgtPort))


# this is the end of the tcp connection making script.