# this is a sample python script program which is used to demonstrate a port scan on all the ports in a given range.

from socket import *

def portAndConnScanner(tgtip):
	duplicate='failed_case.txt'	
	original='success_case.txt'
	letswrite=open(duplicate,'w')
	letswork=open(original,'w')
	try:			
		
		hostName=gethostbyaddr(tgtip)
		a='\n\t\t\t\t\t\t\t\t[+]  Scan results for :'+hostName[0]
		print'\n\n [+]  Scan results for :'+hostName[0]
		print'please wait for a while......\n\n'
		setdefaulttimeout(1)
		for tgtPort in range(1,1024):
			b="\n\t\t\t\t\t\t\t\t[+] Scanning port : %d\n"%tgtPort
			
			try:
				socketConnection=socket(AF_INET,SOCK_STREAM)
				socketConnection.connect((tgtip,tgtPort))
				socketConnection.send('hello buddy')
				results=socketConnection.recv(5000)
				d='\n[+] the %d/TCP connection is open\n'%tgtPort
				e='[+]'+str(results)
				socketConnection.close()
				letswork.write(a)
				letswork.write(b)
				letswork.write(d)
				letswork.write(e)
				letswork.write('\n')
				letswork.write('__'*44)
				letswork.write('\n')				
				letswork.write('+=+'*44)
				letswork.write('\n')
			except:
				c='\n\t[+] %d/TCP is closed'%tgtPort
				letswrite.write(a)
				letswrite.write(b)
				letswrite.write(c)
				letswrite.write('\n')
			print"[+] Scanning port : %d\n"%tgtPort
		letswrite.write('\nThis is the end of the failure case crunchfile')
		letswrite.close()
		letswork.write('\nThis is the end of the success case crunch file\n\n.....')
		letswork.close()
	
		print'\n_/\_ Crunch file creation is been completed successfully..!! _/\_'
		print'\t:- No more ports given to search\n'
		print'Please, view the crunch file to see the results.'
	except:
		print'\n\n [-] Oh common man...!!! Your connection really sucks...\n\n'


def main():
	tgtip=raw_input('\nPlease Enter the IP address that you want to scan the ports:\n\n>')
	portAndConnScanner(tgtip)

if __name__=="__main__":
	main()

# this is end of the python script program .of the port scanner. happy coding..!!e
